<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>js_复选框的实现</title>
    <link rel="stylesheet" href="index.css">
    <style>
	#outer{
		height: 400px;
		width: 200px;
		margin: 0 auto;
		border: 1px solid black;
		border-radius: 5px;
		font-size: 700;
	}
	#outer p{
		/*display: inline-block;*/
		margin-left: 50px;
	}
	#outer a:link{
		text-decoration: none;
		color: #666666;
	}
	#outer > div{
		margin: 0px 10px;
		border-bottom: 1px solid black;
	}
	#outer>div>p{
		margin-left: 40px;
	}

    </style>
</head>
<body>
<div id="container">
<div id="outer">
	<div id="div1">
		<p><input type="checkbox" class="checked" ><label>全选</label>
		<a href="javascript:" >反选</a>
		</p>
	</div>
	<div id="div2">
	<p><input type="checkbox" class="checked" >第一项</p>
	<p><input type="checkbox" class="checked" >第二项</p>
	<p><input type="checkbox" class="checked" >第三项</p>
	<p><input type="checkbox" class="checked" >第四项</p>
	<p><input type="checkbox" class="checked" >第五项</p>
	<p><input type="checkbox" class="checked" >第六项</p>
	<p><input type="checkbox" class="checked" >第七项</p>
	<p><input type="checkbox" class="checked" >第八项</p>
	<p><input type="checkbox" class="checked" >第九项</p>
</div>
</div>
</div>
<script>
window.onload=function  () {
	var oA=document.getElementById('div1').getElementsByTagName('a')[0];
	var oC=document.getElementById('div1').getElementsByTagName('input')[0];
	var oLabel=document.getElementById('div1').getElementsByTagName('label')[0];
	var oInput=document.getElementById('div2').getElementsByTagName('input');
	var isCheckedAll=function(){
		//注意局部变量，请不要污染全局。
		//否则后果很严重....................
	    var a=0;
		for (var n = 0; n < oInput.length; n++) {
			oInput[n].checked && a++;
		}
		oC.checked=a==oInput.length;
		oLabel.innerHTML=oC.checked?"全不选":"全选";
	}
	// oA.onclick=function(){
	// 	for (var i = oInput.length - 1; i >= 0; i--) {
	// 		oInput[i].checked=oInput[i].checked=='!checked'?'!checked':'checked'
	// 			isCheckedAll();

		// };
		oC.onclick=function(){
			for (var i = oInput.length - 1; i >= 0; i--) {
				oInput[i].checked=this.checked;
			}
			isCheckedAll();
		}
		oA.onclick=function(){
			for (var i = oInput.length - 1; i >= 0; i--) {
				oInput[i].checked=!oInput[i].checked;
			}
			isCheckedAll();
		}

			for (var i = oInput.length - 1; i >= 0; i--) {
				oInput[i]=function(){
					isCheckedAll();
				}
			};
		


	

}
	
</script>
</body>
</html>